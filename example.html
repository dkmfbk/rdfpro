
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015/07/03
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>rdfpro - RDFpro usage example (SemDev paper)</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/docs.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/googlecode.min.css" rel="stylesheet" />

		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<style>footer { padding-top: 5px!important; padding-bottom: 5px!important; margin-top: 30px!important }
                div.subfooter { padding-top: 20px!important; padding-bottom: 10px!important }
                p.copyright { display: none }</style>
	</head>

	<body class="page-example project-rdfpro" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="./"><img src='images/rdfpro.png' />
                        <span>RDF<sub>pro</sub></span></a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="index.html" title="Home">Home</a></li>
									<li ><a href="team-list.html" title="Team">Team</a></li>
									<li ><a href="model.html" title="Processing Model">Processing Model</a></li>
									<li ><a href="publications.html" title="Publications">Publications</a></li>
									<li ><a href="license.html" title="License">License</a></li>
									<li ><a href="third-party.html" title="Third-party licenses">Third-party licenses</a></li>
								</ul>
							</li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Tool <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="install.html" title="Installation">Installation</a></li>
									<li ><a href="usage.html" title="Usage">Usage</a></li>
									<li ><a href="web-interface.html" title="Web interface">Web interface</a></li>
									<li class="active"><a href="" title="Example (SemDev)">Example (SemDev)</a></li>
									<li ><a href="examples_sac.html" title="Examples (SAC)">Examples (SAC)</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Libraries <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="rdfprolib.html" title="RDFpro">RDFpro</a></li>
									<li ><a href="tql.html" title="TQL">TQL</a></li>
									<li ><a href="jsonld.html" title="JSONLD">JSONLD</a></li>
									<li ><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Maven Reports <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li class="dropdown-submenu ">
										<a href="project-info.html" title="Project Information">Project Information</a>
										<ul class="dropdown-menu">
											<li ><a href="index.html" title="About">About</a></li>
											<li ><a href="license.html" title="Project License">Project License</a></li>
											<li ><a href="source-repository.html" title="Source Repository">Source Repository</a></li>
											<li ><a href="team-list.html" title="Project Team">Project Team</a></li>
											<li ><a href="plugins.html" title="Project Plugins">Project Plugins</a></li>
										</ul>
									</li>
									<li class="dropdown-submenu ">
										<a href="project-reports.html" title="Project Reports">Project Reports</a>
										<ul class="dropdown-menu">
											<li ><a href="surefire-report.html" title="Surefire Report">Surefire Report</a></li>
											<li ><a href="property-updates-report.html" title="Property Updates Report">Property Updates Report</a></li>
											<li ><a href="changelog.html" title="Change Log">Change Log</a></li>
											<li ><a href="dev-activity.html" title="Developer Activity">Developer Activity</a></li>
											<li ><a href="file-activity.html" title="File Activity">File Activity</a></li>
										</ul>
									</li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Links <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="https://github.com/dkmfbk/rdfpro" title="GitHub project" class="externalLink">GitHub project</a></li>
									<li ><a href="https://github.com/dkmfbk/rdfpro/issues" title="Issue tracker" class="externalLink">Issue tracker</a></li>
									<li ><a href="mailto:rdfproATfbkDOTeu" title="Contact authors" class="externalLink">Contact authors</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="page-header">
 <h1>RDFpro usage example (SemDev paper)</h1>
</div> 
<p>We describe here an example of using RDFpro for integrating RDF data from Freebase, GeoNames and DBpedia (version 3.9) in the four languaged EN, ES, IT and NL, performing smushing, inference, deduplication and statistics extraction.</p> 
<p>This example is taken from the <a class="externalLink" href="https://dkm-static.fbk.eu/people/rospocher/files/pubs/2014iswcSemDev01.pdf">ISWC SemDev 2014 paper</a> and here we provide further details included the concrete RDFpro commands necessary to carry out the integration task. Note, however, that the numbers here reported (collected after repeating the processing in January 2015) are different from the ones in the paper, as both the accessed data sources and RDFpro have changed in the meanwhile (more data available, faster RDFpro implementation).</p> 
<div class="section"> 
 <div class="section"> 
  <h3 id="Data_download_and_selection">Data download and selection</h3> 
  <p>We assume the goal is to gather and integrate data about entities (e.g., persons, location, organizations) from the three Freebase, GeoNames and DBpedia sources. In a first selection step we choose the following dump files as input for our integration process:</p> 
  <ul> 
   <li> <p>the Freebase complete <a class="externalLink" href="http://download.freebaseapps.com/">RDF dataset</a>, containing over 2.6 billions triples.</p></li> 
   <li> <p>the GeoNames <a class="externalLink" href="http://download.geonames.org/all-geonames-rdf.zip">data file</a>, <a class="externalLink" href="http://www.geonames.org/ontology/ontology_v3.1.rdf">ontology</a> and <a class="externalLink" href="http://www.geonames.org/ontology/mappings_v3.01.rdf">schema mappings</a> w.r.t. DBpedia</p></li> 
   <li> <p>the following DBpedia 3.9 files for the four EN, ES, IT, NL DBpedia chapters:</p> 
    <ul> 
     <li>DBpedia <a class="externalLink" href="http://downloads.dbpedia.org/3.9/dbpedia_3.9.owl.bz2">ontology</a></li> 
     <li>article categories, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/article_categories_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/article_categories_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/article_categories_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/article_categories_en_uris_nl.ttl.bz2">NL</a></li> 
     <li>category labels, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/category_labels_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/category_labels_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/category_labels_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/category_labels_nl.ttl.bz2">NL</a></li> 
     <li>external links, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/external_links_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/external_links_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/external_links_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/external_links_nl.ttl.bz2">NL</a></li> 
     <li>geographic coordinates, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/geo_coordinates_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/geo_coordinates_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/geo_coordinates_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/geo_coordinates_nl.ttl.bz2">NL</a></li> 
     <li>homepages, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/homepages_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/homepages_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/homepages_it.ttl.bz2">IT</a></li> 
     <li>image links, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/images_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/images_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/images_it.ttl.bz2">IT</a></li> 
     <li>instance types, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/instance_types_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/instance_types_heuristic_en.ttl.bz2">EN (heuristics)</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/instance_types_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/instance_types_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/instance_types_nl.ttl.bz2">NL</a></li> 
     <li>labels, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/labels_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/labels_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/labels_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/labels_nl.ttl.bz2">NL</a></li> 
     <li>mapping-based properties, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/mappingbased_properties_cleaned_en.ttl.bz2">EN (cleaned)</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/mappingbased_properties_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/mappingbased_properties_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/mappingbased_properties_nl.ttl.bz2">NL</a></li> 
     <li>short abstracts, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/short_abstracts_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/short_abstracts_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/short_abstracts_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/short_abstracts_nl.ttl.bz2">NL</a></li> 
     <li>SKOS categories, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/skos_categories_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/skos_categories_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/skos_categories_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/skos_categories_nl.ttl.bz2">NL</a></li> 
     <li>Wikipedia links, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/wikipedia_links_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/wikipedia_links_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/wikipedia_links_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/wikipedia_links_nl.ttl.bz2">NL</a></li> 
     <li>interlanguage links, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/interlanguage_links_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/interlanguage_links_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/interlanguage_links_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/interlanguage_links_nl.ttl.bz2">NL</a></li> 
     <li>DBpedia IRI - URI <tt>owl:sameAs</tt> links, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/iri_same_as_uri_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/iri_same_as_uri_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/iri_same_as_uri_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/iri_same_as_uri_nl.ttl.bz2">NL</a></li> 
     <li>DBpedia - Freebase <tt>owl:sameAs</tt> links, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/freebase_links_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/freebase_links_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/freebase_links_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/freebase_links_nl.ttl.bz2">NL</a></li> 
     <li>DBpedia - GeoNames <tt>owl:sameAs</tt> links, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/geonames_links_en.ttl.bz2">EN</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/es/geonames_links_es.ttl.bz2">ES</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/it/geonames_links_it.ttl.bz2">IT</a>, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/nl/geonames_links_nl.ttl.bz2">NL</a></li> 
     <li>person data, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/persondata_en.ttl.bz2">EN</a></li> 
     <li>PND codes, <a class="externalLink" href="http://downloads.dbpedia.org/3.9/en/pnd_en.ttl.bz2">EN</a></li> 
    </ul></li> 
   <li> <p>vocabulary definition files for <a class="externalLink" href="http://xmlns.com/foaf/0.1/">FOAF</a>, <a class="externalLink" href="http://www.w3.org/2004/02/skos/core#">SKOS</a>, <a class="externalLink" href="http://purl.org/dc/terms/">DCTERMS</a>, <a class="externalLink" href="http://www.w3.org/2003/01/geo/wgs84_pos#">WGS84</a>, <a class="externalLink" href="http://www.w3.org/2005/Incubator/geo/XGR-geo/W3C_XGR_Geo_files/geo_2007.owl">GEORSS</a></p></li> 
  </ul> 
  <p>Basically, we import all Freebase and GeoNames data as they only provide global dump files, while we import selected DBpedia dump files leaving out files for Wikipedia inter-page, redirect and disambiguation links and page and revision IDs/URIs (as not relevant in this scenario), raw infobox properties (as lower-quality if compared to mapping-based properties) and extended abstract (as too long).</p> 
  <p>Bash script <a href="example/download.sh">download.sh</a> can be used to automatize the download of all the selected dump files, placing them in multiple directories <tt>vocab</tt> (for vocabularies), <tt>freebase</tt>, <tt>geonames</tt>, <tt>dbp_en</tt> (DBpedia EN), <tt>dbp_es</tt> (DBpedia ES), <tt>dbp_it</tt> (DBpedia IT) and <tt>dbp_nl</tt> (DBpedia NL).</p> 
 </div> 
 <div class="section"> 
  <h3 id="Data_processing_single_steps">Data processing (single steps)</h3> 
  <p>Processing with RDFpro involves the six steps shown in the figure below. These steps can be executed individually by invoking <tt>rdfpro</tt> six times, as described next. Bash script <a href="example/process_single.sh">process_single.sh</a> can be used to issue these commands.</p> 
  <div style="text-align: center; padding-top: 20px; padding-bottom: 20px"> 
   <img src="example/processing.png" alt="Data processing steps" /> 
  </div> 
  <div class="section"> 
   <div class="section"> 
    <h5 id="Step_1_Filtering">Step 1 Filtering</h5> 
    <div class="source"> 
     <div class="source"> 
      <pre>rdfpro { @read metadata.trig , \
         @read vocab/* @transform '=c &lt;graph:vocab&gt;' , \
         @read freebase/* @transform '-spo fb:common.topic fb:common.topic.article fb:common.topic.notable_for
             fb:common.topic.notable_types fb:common.topic.topic_equivalent_webpage &lt;http://rdf.freebase.com/key/*&gt;
             &lt;http://rdf.freebase.com/ns/common.notable_for*&gt; &lt;http://rdf.freebase.com/ns/common.document*&gt;
             &lt;http://rdf.freebase.com/ns/type.*&gt; &lt;http://rdf.freebase.com/ns/user.*&gt; &lt;http://rdf.freebase.com/ns/base.*&gt;
             &lt;http://rdf.freebase.com/ns/freebase.*&gt; &lt;http://rdf.freebase.com/ns/dataworld.*&gt;
             &lt;http://rdf.freebase.com/ns/pipeline.*&gt; &lt;http://rdf.freebase.com/ns/atom.*&gt; &lt;http://rdf.freebase.com/ns/community.*&gt;
             =c &lt;graph:freebase&gt;' , \
         @read geonames/*.rdf .geonames:geonames/all-geonames-rdf.zip \
             @transform '-p gn:childrenFeatures gn:locationMap
                 gn:nearbyFeatures gn:neighbouringFeatures gn:countryCode
                 gn:parentFeature gn:wikipediaArticle rdfs:isDefinedBy
                 rdf:type =c &lt;graph:geonames&gt;' , \
         { @read dbp_en/* @transform '=c &lt;graph:dbp_en&gt;' , \
           @read dbp_es/* @transform '=c &lt;graph:dbp_es&gt;' , \
           @read dbp_it/* @transform '=c &lt;graph:dbp_it&gt;' , \
           @read dbp_nl/* @transform '=c &lt;graph:dbp_nl&gt;' } \
             @transform '-o bibo:* -p dc:rights dc:language foaf:primaryTopic' } \
       @transform '+o &lt;*&gt; _:* * *^^xsd:* *@en *@es *@it *@nl' \
       @transform '-o &quot;&quot; &quot;&quot;@en &quot;&quot;@es &quot;&quot;@it &quot;&quot;@nl' \
       @write filtered.tql.gz
</pre> 
     </div> 
    </div> 
    <p>Downloaded dump files are filtered to extract desired RDF quads and place them in separate graphs to track provenance. A <a href="example/metadata.trig">metadata file</a> is added to link each graph to the URI of the associated source (e.g. Freebase). The command above shows how a parallel and sequence composition of <tt>@read</tt> and <tt>@filter</tt> can be used to process in a single step a number of RDF files, applying filtering both to separate file groups and globally. Some notes on the implemented filtering rules:</p> 
    <ul> 
     <li>Freebase filtering aims at removing redundant <tt>http://rdf.freebase.com/key/</tt> triples and triples belonging to Freebase specific domains (e.g., users, user KBs, schemas, â€¦). We also remove triples of limited informative value.</li> 
     <li>GeoNames filtering aims at removing triples that are uninformative (<tt>rdfs:isDefinedBy</tt>, <tt>rdf:type</tt>), redundant (<tt>gn:countryCode</tt>, <tt>gn:parentFeature</tt>, <tt>gn:wikipediaArticle</tt>, the latter providing the same information of links to DBpedia) or that points to auto-generated resources for which there is no data in the dump (<tt>gn:childrenFeatures</tt>, <tt>gn:locationMap</tt>, <tt>gn:nearbyFeatures</tt>, <tt>gn:neighbouringFeatures</tt>).</li> 
     <li>DBpedia filtering aims at removing triples that have limited informative value (<tt>dc:rights</tt>, <tt>dc:language</tt> for images and Wikipedia pages) or that are redundant (<tt>foaf:primaryTopic</tt> and all triples in the <a class="externalLink" href="http://purl.org/ontology/bibo/"><tt>bibo</tt></a> namespace).</li> 
     <li>the global filtering (<tt>&quot;ol -'' o@ +'en' +'es' +'it' +'nl' -* o^ +xsd -*&quot;</tt>) aims at removing literals with a language different from <tt>en</tt>, <tt>es</tt>, <tt>it</tt> and <tt>nl</tt>, literals that are empty and literals with a datatype not in the XML Schema vocabulary.</li> 
     <li>the <tt>-r &quot;cu '&lt;GRAPH_URI&gt;'&quot;</tt> options serve to place filtered triples in different graphs, so that we can keep track of which source they come from</li> 
    </ul> 
   </div> 
   <div class="section"> 
    <h5 id="Step_2_TBox_extraction">Step 2 TBox extraction</h5> 
    <div class="source"> 
     <div class="source"> 
      <pre>rdfpro @read filtered.tql.gz \
       @tbox \
       @transform '-o owl:Thing schema:Thing foaf:Document bibo:* con:* -p dc:subject foaf:page dct:relation bibo:* con:*' \
       @write tbox.tql.gz
</pre> 
     </div> 
    </div> 
    <p>TBox quads are extracted from filtered data and stored, filtering out unwanted top level classes (<tt>owl:Thing</tt>, <tt>schema:Thing</tt>, <tt>foaf:Document</tt>) and vocabulary alignments (to <a class="externalLink" href="http://purl.org/ontology/bibo/"><tt>bibo</tt></a> and <a class="externalLink" href="http://www.w3.org/2000/10/swap/pim/contact#"><tt>con</tt></a> terms and <tt>dc:subject</tt>).</p> 
   </div> 
   <div class="section"> 
    <h5 id="Step_3_Smushing">Step 3 Smushing</h5> 
    <div class="source"> 
     <div class="source"> 
      <pre>rdfpro @read filtered.tql.gz \
       @smush '&lt;http://dbpedia&gt;' '&lt;http://it.dbpedia&gt;' '&lt;http://es.dbpedia&gt;' \
              '&lt;http://nl.dbpedia&gt;' '&lt;http://rdf.freebase.com&gt;' '&lt;http://sws.geonames.org&gt;' \
       @write smushed.tql.gz
</pre> 
     </div> 
    </div> 
    <p>Filtered data is smushed so to use canonical URIs for each <tt>owl:sameAs</tt> equivalence class, producing an intermediate smushed file. Note the specification of a ranked list of namespaces for selecting the canonical URIs.</p> 
   </div> 
   <div class="section"> 
    <h5 id="Step_4_Inference">Step 4 Inference</h5> 
    <div class="source"> 
     <div class="source"> 
      <pre>rdfpro @read smushed.tql.gz \
       @rdfs -c '&lt;graph:vocab&gt;' -e rdfs4a,rdfs4b,rdfs8 -d tbox.tql.gz \
       @transform '-o owl:Thing schema:Thing foaf:Document bibo:* con:* -p dc:subject foaf:page dct:relation bibo:* con:*' \
       @write inferred.tql.gz
</pre> 
     </div> 
    </div> 
    <p>The deductive closure of smushed data is computed and saved, using the extracted TBox and excluding RDFS rules <tt>rdfs4a</tt>, <tt>rdfs4b</tt> and <tt>rdfs8</tt> (and keeping the remaining ones) to avoid inferring uninformative <tt>X rdf:type rdfs:Resource</tt> quads. The closed TBox is placed in graph <tt>&lt;graph:vocab&gt;</tt>. A further filtering is done to be sure that no unwanted triple is present in the result dataset due to inference.</p> 
   </div> 
   <div class="section"> 
    <h5 id="Step_5_Merging">Step 5 Merging</h5> 
    <div class="source"> 
     <div class="source"> 
      <pre>rdfpro @read inferred.tql.gz \
       @unique -m \
       @write dataset.tql.gz
</pre> 
     </div> 
    </div> 
    <p>Quads with the same subject, predicate and object are merged and placed in a graph linked to the original sources to track provenance (note the use of the <tt>-m</tt> option).</p> 
   </div> 
   <div class="section"> 
    <h5 id="Step_6_Statistics_extraction">Step 6 Statistics extraction</h5> 
    <div class="source"> 
     <div class="source"> 
      <pre>rdfpro { @read tbox.tql.gz , @read dataset.tql.gz @stats } @write statistics.tql.gz
</pre> 
     </div> 
    </div> 
    <p>VOID statistics are extracted and merged with TBox data, forming an annotated ontology that documents the produced dataset.</p> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Data_processing_aggregate_steps">Data processing (aggregate steps)</h3> 
  <p>The 6 steps previously listed can be also aggregated to reduce overhead for writing and reading back intermediate files, exploiting RDFpro capability to arbitrarily compose processors and write intermediate results. In particular, steps 1-2 can be aggregated as follows:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>rdfpro { @read metadata.trig , \
         @read vocab/* @transform '=c &lt;graph:vocab&gt;' , \
         @read freebase/* @transform '-spo fb:common.topic fb:common.topic.article fb:common.topic.notable_for
             fb:common.topic.notable_types fb:common.topic.topic_equivalent_webpage &lt;http://rdf.freebase.com/key/*&gt;
             &lt;http://rdf.freebase.com/ns/common.notable_for*&gt; &lt;http://rdf.freebase.com/ns/common.document*&gt;
             &lt;http://rdf.freebase.com/ns/type.*&gt; &lt;http://rdf.freebase.com/ns/user.*&gt; &lt;http://rdf.freebase.com/ns/base.*&gt;
             &lt;http://rdf.freebase.com/ns/freebase.*&gt; &lt;http://rdf.freebase.com/ns/dataworld.*&gt;
             &lt;http://rdf.freebase.com/ns/pipeline.*&gt; &lt;http://rdf.freebase.com/ns/atom.*&gt;  &lt;http://rdf.freebase.com/ns/community.*&gt;
             =c &lt;graph:freebase&gt;' , \
         @read geonames/*.rdf .geonames:geonames/all-geonames-rdf.zip \
             @transform '-p gn:childrenFeatures gn:locationMap
                 gn:nearbyFeatures gn:neighbouringFeatures gn:countryCode
                 gn:parentFeature gn:wikipediaArticle rdfs:isDefinedBy
                 rdf:type =c &lt;graph:geonames&gt;' , \
         { @read dbp_en/* @transform '=c &lt;graph:dbp_en&gt;' , \
           @read dbp_es/* @transform '=c &lt;graph:dbp_es&gt;' , \
           @read dbp_it/* @transform '=c &lt;graph:dbp_it&gt;' , \
           @read dbp_nl/* @transform '=c &lt;graph:dbp_nl&gt;' } \
             @transform '-o bibo:* -p dc:rights dc:language foaf:primaryTopic' } \
       @transform '+o &lt;*&gt; _:* * *^^xsd:* *@en *@es *@it *@nl' \
       @transform '-o &quot;&quot; &quot;&quot;@en &quot;&quot;@es &quot;&quot;@it &quot;&quot;@nl' \
       @write filtered.tql.gz \
       @tbox \
       @transform '-o owl:Thing schema:Thing foaf:Document bibo:* con:* -p dc:subject foaf:page dct:relation bibo:* con:*' \
       @write tbox.tql.gz
</pre> 
   </div> 
  </div> 
  <p>Similarly, steps 3-6 can be aggregated in a single macro-step:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>rdfpro @read filtered.tql.gz \
       @smush '&lt;http://dbpedia&gt;' '&lt;http://it.dbpedia&gt;' '&lt;http://es.dbpedia&gt;' \
              '&lt;http://nl.dbpedia&gt;' '&lt;http://rdf.freebase.com&gt;' '&lt;http://sws.geonames.org&gt;' \
       @rdfs -c '&lt;graph:vocab&gt;' -e rdfs4a,rdfs4b,rdfs8 -d tbox.tql.gz \
       @transform '-o owl:Thing schema:Thing foaf:Document bibo:* con:* -p dc:subject foaf:page dct:relation bibo:* con:*' \
       @unique -m \
       @write dataset.tql.gz \
       @stats \
       @read tbox.tql.gz \
       @write statistics.tql.gz
</pre> 
   </div> 
  </div> 
  <p>Bash script <a href="example/process_aggregated.sh">process_aggregated.sh</a> can be used to issue these two commands.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Results">Results</h3> 
  <p>The table below reports the results of executing the processing steps individually and aggregated on an Intel Core I7 860 machine with 16 GB RAM and a 500GB 7200RPM hard disk, using <tt>pigz</tt> and <tt>pbzip2</tt> as compressors/decompressors and <tt>sort -S 4096M --batch-size=128 --compress-program=pigz</tt> as the sort command. Smushing and inference add duplicates that are removed with merging. TBox extraction and filtering are fast, while other steps are slower because complex or due to the need to sort data or process it in multiple passes. The aggregation of processing steps leads to a sensible reduction of the total processing time from 17500 s to 10905 s (note: times were respectively 18953 s and 13531 s in July 2014 test).</p> 
  <!-- Input size             Output size            Time
                               Quads      Size        Quads      Size
    Step 1 - Filtering         3174641760 33208598528 769671526  10350542495 4194
    Step 2 - TBox extraction   769671526  10350542495 149650     1335279     412
    Step 3 - Smushing          769671526  10350542495 799755339  11049733537 2265
    Step 4 - Inference         799904989  11051068816 1690704128 16655132884 3780
    Step 5 - Merging           1690704128 16655132884 964179957  9511455269  4254
    Step 6 - Statistics        964329607  9512790548  297867     3390328     2595
    Steps 1-2 aggregated       3174641760 33208598528 769821176  10351877774 4315
    Steps 3-6 aggregated       769821176  10351877774 964477824  9520662330  6590 --> 
  <table border="0" class="bodyTable table table-striped table-hover"> 
   <thead> 
    <tr class="a"> 
     <th rowspan="2">Processing step</th> 
     <th colspan="2">Input size</th> 
     <th colspan="2">Output size</th> 
     <th colspan="2">Throughput</th> 
     <th rowspan="2">Time<br />[s]</th> 
    </tr> 
    <tr class="b"> 
     <th>[Mquads]</th> 
     <th>[MiB]</th> 
     <th>[Mquads]</th> 
     <th>[MiB]</th> 
     <th>[Mquads/s]</th> 
     <th>[MiB/s]</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="a"> 
     <td>Step 1 - Filtering</td> 
     <td title="3020 @ 07/2014">3175</td> 
     <td title="30013 @ 07/2014">31670</td> 
     <td title="751 @ 07/2014">770</td> 
     <td title="9912 @ 07/2014">9871</td> 
     <td title="0.57 @ 07/2014">0.76</td> 
     <td title="5.70 @ 07/2014">7.55</td> 
     <td title="5266 @ 07/2014">4194</td> 
    </tr> 
    <tr class="b"> 
     <td>Step 2 - TBox extraction</td> 
     <td title="751 @ 07/2014">770</td> 
     <td title="9912 @ 07/2014">9871</td> 
     <td title="&lt;1 @ 07/2014">&lt;1</td> 
     <td title="~1 @ 07/2014">~1</td> 
     <td title="1.36 @ 07/2014">1.87</td> 
     <td title="18.00 @ 07/2014">23.95</td> 
     <td title="551 @ 07/2014">412</td> 
    </tr> 
    <tr class="a"> 
     <td>Step 3 - Smushing</td> 
     <td title="751 @ 07/2014">770</td> 
     <td title="9912 @ 07/2014">9871</td> 
     <td title="781 @ 07/2014">800</td> 
     <td title="10578 @ 07/2014">10538</td> 
     <td title="0.31 @ 07/2014">0.34</td> 
     <td title="4.04 @ 07/2014">4.36</td> 
     <td title="2453 @ 07/2014">2265</td> 
    </tr> 
    <tr class="b"> 
     <td>Step 4 - Inference</td> 
     <td title="781 @ 07/2014">800</td> 
     <td title="10578 @ 07/2014">10539</td> 
     <td title="1694 @ 07/2014">1691</td> 
     <td title="15933 @ 07/2014">15884</td> 
     <td title="0.22 @ 07/2014">0.21</td> 
     <td title="2.91 @ 07/2014">2.79</td> 
     <td title="3630 @ 07/2014">3780</td> 
    </tr> 
    <tr class="a"> 
     <td>Step 5 - Merging</td> 
     <td title="1694 @ 07/2014">1691</td> 
     <td title="15933 @ 07/2014">15884</td> 
     <td title="955 @ 07/2014">964</td> 
     <td title="7956 @ 07/2014">9071</td> 
     <td title="0.38 @ 07/2014">0.40</td> 
     <td title="3.61 @ 07/2014">3.73</td> 
     <td title="4413 @ 07/2014">4254</td> 
    </tr> 
    <tr class="b"> 
     <td>Step 6 - Statistics extraction</td> 
     <td title="955 @ 07/2014">964</td> 
     <td title="7956 @ 07/2014">9072</td> 
     <td title="&lt;1 @ 07/2014">&lt;1</td> 
     <td title="~3 @ 07/2014">~3</td> 
     <td title="0.36 @ 07/2014">0.37</td> 
     <td title="3.02 @ 07/2014">3.50</td> 
     <td title="2640 @ 07/2014">2595</td> 
    </tr> 
    <tr class="a"> 
     <td>Steps 1-2 aggregated</td> 
     <td title="3020 @ 07/2014">3175</td> 
     <td title="30013 @ 07/2014">31670</td> 
     <td title="751 @ 07/2014">770</td> 
     <td title="9913 @ 07/2014">9872</td> 
     <td title="0.56 @ 07/2014">0.74</td> 
     <td title="5.60 @ 07/2014">7.34</td> 
     <td title="5363 @ 07/2014">4315</td> 
    </tr> 
    <tr class="b"> 
     <td>Steps 3-6 aggregated</td> 
     <td title="751 @ 07/2014">770</td> 
     <td title="9913 @ 07/2014">9872</td> 
     <td title="955 @ 07/2014">964</td> 
     <td title="7967 @ 07/2014">9080</td> 
     <td title="0.09 @ 07/2014">0.12</td> 
     <td title="1.21 @ 07/2014">1.50</td> 
     <td title="8168 @ 07/2014">6590</td> 
    </tr> 
   </tbody> 
  </table> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">About</li>
						<li >
							<a href="index.html" title="Home">Home</a>
						</li>
						<li >
							<a href="team-list.html" title="Team">Team</a>
						</li>
						<li >
							<a href="model.html" title="Processing Model">Processing Model</a>
						</li>
						<li >
							<a href="publications.html" title="Publications">Publications</a>
						</li>
						<li >
							<a href="license.html" title="License">License</a>
						</li>
						<li >
							<a href="third-party.html" title="Third-party licenses">Third-party licenses</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Tool</li>
						<li >
							<a href="install.html" title="Installation">Installation</a>
						</li>
						<li >
							<a href="usage.html" title="Usage">Usage</a>
						</li>
						<li >
							<a href="web-interface.html" title="Web interface">Web interface</a>
						</li>
						<li class="active">
							<a href="#" title="Example (SemDev)">Example (SemDev)</a>
						</li>
						<li >
							<a href="examples_sac.html" title="Examples (SAC)">Examples (SAC)</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Libraries</li>
						<li >
							<a href="rdfprolib.html" title="RDFpro">RDFpro</a>
						</li>
						<li >
							<a href="tql.html" title="TQL">TQL</a>
						</li>
						<li >
							<a href="jsonld.html" title="JSONLD">JSONLD</a>
						</li>
						<li >
							<a href="apidocs/index.html" title="Javadoc">Javadoc</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Links</li>
						<li >
							<a href="https://github.com/dkmfbk/rdfpro" title="GitHub project" class="externalLink">GitHub project</a>
						</li>
						<li >
							<a href="https://github.com/dkmfbk/rdfpro/issues" title="Issue tracker" class="externalLink">Issue tracker</a>
						</li>
						<li >
							<a href="mailto:rdfproATfbkDOTeu" title="Contact authors" class="externalLink">Contact authors</a>
						</li>
					</ul>
				</div>
				<div class="span4 bottom-description">
					RDFpro is public domain software developed within:<br/><br/>
        <a href="http://dkm.fbk.eu/"><img src="images/fbkdkm.png"/></a>&nbsp;&nbsp;
        <a href="http://www.newsreader-project.eu/"><img src="images/newsreader.png"/></a><br/>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-59727692-1', 'auto');
          ga('send', 'pageview');

        </script>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2015 <a href="http://www.fbk.eu">FBK-irst</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="publishDate">Last Published: 2015/07/03. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>
	
<div style="font: normal 14px/1.5em sans-serif !important;" id="dkmbar-container">
  <div id="dkmbar">
    <div id="dkmbar-logos">
      <a href="https://www.fbk.eu/">
        <img src="https://knowledgestore.fbk.eu/files/logo_fbk.png"/>
      </a>
      <a href="https://dkm.fbk.eu/">
        <img src="https://knowledgestore.fbk.eu/files/logo_dkm.png"/>
      </a>
      <span id="dkmbar-title">
        <strong>Data and Knowledge Management tools</strong>
      </span>
    </div>
    <ul>
      <li class="nav-button nav-button-pikes">
        <a href="http://pikes.fbk.eu">PIKES</a>
      </li>
      <li class="nav-button nav-button-rdfpro">
        <a href="http://rdfpro.fbk.eu">
          <span>RDF</span>
          <sub>pro</sub>
        </a>
      </li>
      <li class="nav-button nav-button-ks">
        <a href="http://knowledgestore.fbk.eu">KnowledgeStore</a>
      </li>
      <li class="nav-button nav-button-texowl">
        <a href="https://dkm.fbk.eu/technologies/tex-owl">TeX-OWL</a>
      </li>
      <li class="nav-button nav-button-moki">
        <a href="https://moki.fbk.eu/website/index.php">MoKi</a>
      </li>
      <li class="nav-button nav-button-ckr">
        <a href="https://dkm.fbk.eu/technologies/ckr">CKR</a>
      </li>
    </ul>
  </div>
</div>
<style>@media (max-width: 979px) {
                    #dkmbar-container {
                        display: none;
                    }
                    .main-body {
                        margin-top: 0 !important;
                    }
                    .jumbotron {
                        top: 0;
                    }
                }

                @media (max-width: 1200px) {
                    #dkmbar-title {
                        display: none;
                    }
                    #dkmbar {
                        width: 940px !important;
                    }
                }

                #dkmbar-container {
                    direction: ltr;
                    color: #333;
                    height: 35px;
                    line-height: 33px;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    z-index: 99999;
                    background-color: #fff;
                    border-bottom: 2px solid #ddd;
                }

                #dkmbar {
                    width: 1170px;
                    margin: auto;
                }

                #dkmbar-logos {
                    position: relative;
                    top: 3px;
                    display: inline;
                }

                #dkmbar ul {
                    margin: 0;
                    padding: 0;
                    display: inline;
                    margin-left: 20px;
                    float: right;
                }

                #dkmbar ul li {
                    display: inline;
                    margin: 0 10px;
                    padding: 0;
                    line-height: 35px;
                }

                #dkmbar ul li a {
                    color: #333;
                    padding: 4px 10px;
                    -webkit-border-radius: 3px;
                    -moz-border-radius: 3px;
                    border-radius: 3px;
                }

                #dkmbar ul li a:hover {
                    text-decoration: none;
                    background-color: #333 !important;
                    color: #ddd;
                }

                #dkmbar ul li.nav-button-rdfpro a {
                    background-color: #ddd;
                }

                #dkmbar img {
                    padding-right: 20px;
                }

                .navbar {
                    top: 37px;
                }

                .jumbotron {
                    position: relative;
                    top: 37px;
                }

                .main-body {
                    margin-top: 37px;
                }</style>
<script src="./js/custom.js" type="text/javascript"></script>
	<script src="./js/reflow-skin.js"></script>

	</body>
</html>
